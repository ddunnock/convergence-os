/**
 * Theme CSS custom properties for Storybook
 * Provides light/dark theme switching via data-theme attribute
 *
 * These variables override the defaults from @convergence/tailwind-config/globals.css
 * when the [data-theme="dark"] attribute is set on a parent element.
 */

/* Pulse animation for background orbs */
@keyframes pulse {
  0%,
  100% {
    opacity: var(--orb-opacity);
    transform: scale(1);
  }
  50% {
    opacity: calc(var(--orb-opacity) * 0.6);
    transform: scale(1.1);
  }
}

/* Light theme defaults - matching moodboard */
:root,
[data-theme="light"] {
  /* Animated orb background colors - light mode (pastel) */
  --orb-color-1: #c7d2fe;
  --orb-color-2: #ddd6fe;
  --orb-color-3: #bfdbfe;
  --orb-opacity: 0.3;

  /* Background - light gradient from moodboard */
  --bg-gradient-start: #f0f4ff;
  --bg-gradient-mid: #e8eeff;
  --bg-gradient-end: #f2f6ff;
  --storybook-bg: #f0f4ff;
  --background: hsl(0 0% 100%);
  --foreground: hsl(240 10% 10%);
  --card: hsl(0 0% 100%);
  --card-foreground: hsl(240 10% 10%);
  --popover: hsl(0 0% 100%);
  --popover-foreground: hsl(240 10% 10%);
  --primary: hsl(262 83% 58%);
  --primary-foreground: hsl(0 0% 100%);
  --secondary: hsl(240 5% 96%);
  --secondary-foreground: hsl(240 6% 10%);
  --muted: hsl(240 5% 96%);
  --muted-foreground: hsl(240 4% 46%);
  --accent: hsl(262 80% 96%);
  --accent-foreground: hsl(262 83% 45%);
  --destructive: hsl(0 84% 60%);
  --destructive-foreground: hsl(0 0% 100%);
  --border: hsl(240 6% 90%);
  --input: hsl(240 6% 90%);
  --ring: hsl(262 83% 58%);

  /* Glassmorphism - light mode */
  --glass: hsla(0, 0%, 100%, 0.7);
  --glass-strong: hsla(0, 0%, 100%, 0.85);
  --glass-border: hsla(240, 6%, 90%, 0.5);

  /* Glass effect variables - Enhanced with gradient tint and border glow */
  --glass-bg: linear-gradient(135deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.25) 50%, rgba(240, 248, 255, 0.3) 100%);
  --glass-border-enhanced: rgba(255, 255, 255, 0.3);
  --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(255, 255, 255, 0.1) inset, 0 0 20px rgba(255, 255, 255, 0.05);
  --glass-shadow-lg: 0 12px 48px rgba(0, 0, 0, 0.18), 0 4px 16px rgba(0, 0, 0, 0.12), 0 0 0 1px rgba(255, 255, 255, 0.15) inset, 0 0 30px rgba(255, 255, 255, 0.08);
  --glass-shadow-sm: 0 4px 16px rgba(0, 0, 0, 0.1), 0 1px 4px rgba(0, 0, 0, 0.06), 0 0 0 1px rgba(255, 255, 255, 0.08) inset, 0 0 10px rgba(255, 255, 255, 0.03);
  --blur: 30px;
  --blur-sm: 15px;
  --blur-lg: 50px;

  /* Shadows - lighter for light mode */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-default:
    0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg:
    0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-glass: 0 8px 32px hsla(262, 83%, 58%, 0.1);
}

/* Dark theme overrides - matching moodboard */
[data-theme="dark"] {
  /* Animated orb background colors - dark mode (vibrant) */
  --orb-color-1: #6366f1;
  --orb-color-2: #a855f7;
  --orb-color-3: #3b82f6;
  --orb-opacity: 0.2;

  /* Background - dark gradient from moodboard */
  --bg-gradient-start: #0f1419;
  --bg-gradient-mid: #1a1f35;
  --bg-gradient-end: #0f1922;
  --storybook-bg: #0f1419;
  /* Core semantic colors */
  --background: hsl(240 10% 10%);
  --foreground: hsl(0 0% 98%);
  --card: hsl(240 10% 12%);
  --card-foreground: hsl(0 0% 98%);
  --popover: hsl(240 10% 12%);
  --popover-foreground: hsl(0 0% 98%);
  --primary: hsl(262 83% 65%);
  --primary-foreground: hsl(0 0% 100%);
  --secondary: hsl(240 5% 20%);
  --secondary-foreground: hsl(0 0% 98%);
  --muted: hsl(240 5% 20%);
  --muted-foreground: hsl(240 5% 65%);
  --accent: hsl(262 80% 25%);
  --accent-foreground: hsl(262 83% 80%);
  --destructive: hsl(0 62% 50%);
  --destructive-foreground: hsl(0 0% 100%);
  --border: hsl(240 5% 25%);
  --input: hsl(240 5% 25%);
  --ring: hsl(262 83% 65%);

  /* Glassmorphism */
  --glass: hsla(240, 10%, 15%, 0.7);
  --glass-strong: hsla(240, 10%, 15%, 0.85);
  --glass-border: hsla(240, 5%, 30%, 0.5);

  /* Glass effect variables - Enhanced with gradient tint and border glow (dark mode) */
  --glass-bg: linear-gradient(135deg, rgba(30, 35, 55, 0.5) 0%, rgba(25, 30, 50, 0.4) 50%, rgba(35, 40, 65, 0.45) 100%);
  --glass-border-enhanced: rgba(255, 255, 255, 0.12);
  --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.35), 0 2px 8px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.05) inset, 0 0 20px rgba(138, 43, 226, 0.08);
  --glass-shadow-lg: 0 12px 48px rgba(0, 0, 0, 0.45), 0 4px 16px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.08) inset, 0 0 30px rgba(138, 43, 226, 0.12);
  --glass-shadow-sm: 0 4px 16px rgba(0, 0, 0, 0.25), 0 1px 4px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.03) inset, 0 0 10px rgba(138, 43, 226, 0.05);
  --blur: 30px;
  --blur-sm: 15px;
  --blur-lg: 50px;

  /* Shadows - darker for dark mode */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
  --shadow-default:
    0 1px 3px 0 rgb(0 0 0 / 0.4), 0 1px 2px -1px rgb(0 0 0 / 0.4);
}

/* Code component styles - ensure Shiki output respects container styles */
[data-slot="code"] {
  display: flex;
  flex-direction: column;
  overflow: hidden;
  border: 1px solid var(--border);
  background-color: color-mix(in srgb, var(--accent) 50%, transparent);
  border-radius: 0.5rem;
}

[data-slot="code-header"] {
  background-color: var(--accent);
  flex-shrink: 0;
  gap: 0.5rem;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 75%, transparent);
  font-size: 0.875rem;
  display: flex;
  color: var(--muted-foreground);
  align-items: center;
  padding: 0 1rem;
  width: 100%;
  height: 2.5rem;
}

[data-slot="code-block"] {
  position: relative;
  font-size: 0.875rem;
  padding: 1rem;
  overflow: auto;
}

/* @HACK: Using !important to override Shiki's inline styles */
[data-slot="code-block"] pre {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* @HACK: Using !important to override Shiki's inline styles */
[data-slot="code-block"] code {
  background: transparent !important;
  font-size: 13px !important;
  padding: 0 !important;
  border: none !important;
}

/* @HACK: Using !important to override Shiki's inline styles */
[data-slot="code-block"] .line {
  padding-left: 0 !important;
  padding-right: 0 !important;
}

/* Table component styles */
[data-slot="table-container"] {
  position: relative;
  width: 100%;
  overflow-x: auto;
}

[data-slot="table"] {
  width: 100%;
  caption-side: bottom;
  font-size: 0.875rem;
  border-collapse: collapse;
}

[data-slot="table-header"] tr {
  border-bottom: 1px solid var(--border);
}

/* @HACK: Using !important to override Tailwind px-2 class and default browser styles for table headers */
[data-slot="table-header"] [data-slot="table-head"],
[data-slot="table-header"] th {
  height: 2.5rem;
  padding: 0 0.5rem 0 1rem !important;
  text-align: left;
  vertical-align: middle;
  font-weight: 500;
  color: var(--foreground);
  white-space: nowrap;
  border: none !important;
  border-bottom: 1px solid var(--border) !important;
}

/* When TableHead contains a button, adjust padding */
/* @HACK: Using !important to override Tailwind px-2 class */
[data-slot="table-head"]:has(button),
[data-slot="table-head"]:has([data-slot="button"]),
th:has(button),
th:has([data-slot="button"]) {
  padding: 0 0.5rem 0 1rem !important;
  height: auto;
  /* @HACK: Using !important to override default browser/Shiki styles */
  border: none !important;
  border-bottom: 1px solid var(--border) !important;
}

[data-slot="table-body"] tr:last-child {
  border-bottom: 0;
}

[data-slot="table-row"] {
  border-bottom: 1px solid var(--border);
  transition: background-color 0.2s;
}

[data-slot="table-row"]:hover {
  background-color: color-mix(in srgb, var(--muted) 50%, transparent);
}

[data-slot="table-row"][data-state="selected"] {
  background-color: var(--muted);
}

[data-slot="table-cell"] {
  padding: 0.5rem;
  vertical-align: middle;
  white-space: nowrap;
}

[data-slot="table-head"] {
  height: 2.5rem;
  padding: 0 0.5rem;
  text-align: left;
  vertical-align: middle;
  font-weight: 500;
  color: var(--foreground);
  white-space: nowrap;
}

/* DataTable wrapper and utility classes */
.rounded-md {
  border-radius: 0.375rem;
}

.border:not(button):not([data-slot="button"]) {
  border: 1px solid var(--border);
}

/* Button styles for DataTableColumnHeader */
[data-slot="table-head"] [data-slot="button"],
[data-slot="table-head"] button {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  margin: 0;
}

/* Glass button border color - only for glass buttons */
button[class*="border-glass-border"],
[data-slot="button"][class*="border-glass-border"] {
  border-color: var(--glass-border-enhanced) !important;
}

/* Let Button component handle hover/active states - only override if needed for table context */
[data-slot="table-head"] [data-slot="button"][data-state="open"],
[data-slot="table-head"] button[data-state="open"] {
  background-color: var(--accent);
}

/* Icon styles in header buttons */
[data-slot="table-head"] button svg,
[data-slot="table-head"] [data-slot="button"] svg {
  width: 1rem;
  height: 1rem;
  flex-shrink: 0;
  pointer-events: none;
}

/* Ensure TableHead with button has proper alignment */
[data-slot="table-head"]:has(button),
[data-slot="table-head"]:has([data-slot="button"]) {
  padding: 0 0.5rem 0 1rem !important;
  height: auto;
}

/* Color swatch styles in table cells */
[data-slot="table-cell"] .size-6 {
  width: 1.5rem;
  height: 1.5rem;
  border-radius: 0.25rem;
  border: 1px solid var(--border);
  flex-shrink: 0;
}

[data-slot="table-cell"] code {
  font-size: 0.875rem;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  background-color: color-mix(in srgb, var(--muted) 50%, transparent);
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
}

[data-slot="table-cell"] .flex {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
